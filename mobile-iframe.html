<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=3.0">
    <title>Ievolve Event Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        #app-frame {
            width: 100%;
            height: 100vh;
            border: none;
            display: block;
        }
        
        /* Mobile optimizations */
        @media screen and (max-width: 768px) {
            body {
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            #app-frame {
                height: 100vh;
                min-height: 600px;
                transform-origin: 0 0;
            }
        }
        
        /* Very small screens */
        @media screen and (max-width: 480px) {
            #app-frame {
                min-height: 700px;
                /* Scale up for better visibility on small screens */
                transform: scale(1.1);
                transform-origin: 0 0;
                width: 91%; /* Adjust width to compensate for scaling */
            }
            
            body {
                background-color: #f5f5f5;
            }
        }
        
        /* Loading indicator */
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            color: #666;
            z-index: 1000;
        }
        
        /* Hide loading once iframe loads */
        #app-frame.loaded + #loading {
            display: none;
        }
        
        /* Fullscreen button for mobile */
        @media screen and (max-width: 768px) {
            #fullscreen-btn {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 50px;
                padding: 12px 20px;
                font-size: 14px;
                cursor: pointer;
                z-index: 1001;
                box-shadow: 0 4px 12px rgba(0,123,255,0.3);
                display: block;
            }
        }
        
        #fullscreen-btn {
            display: none;
        }
        
        /* Landscape mode adjustments */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            #app-frame {
                height: 100vh;
                transform: none;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <iframe 
        id="app-frame" 
        src="https://d698c84b-fbd4-42e1-8652-8b92c3450c5f-00-jk2pa9a1bwct.riker.replit.dev"
        title="Ievolve Event Management System"
        allow="camera; microphone; geolocation"
        sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-top-navigation"
        loading="lazy">
    </iframe>
    
    <div id="loading">Loading Event Management System...</div>
    
    <button id="fullscreen-btn" onclick="toggleFullscreen()">â›¶ Fullscreen</button>
    
    <script>
        // Remove loading indicator when iframe loads
        document.getElementById('app-frame').onload = function() {
            this.classList.add('loaded');
        };
        
        // Fullscreen functionality for mobile
        function toggleFullscreen() {
            const iframe = document.getElementById('app-frame');
            if (!document.fullscreenElement) {
                iframe.requestFullscreen().catch(err => {
                    console.log('Fullscreen not supported');
                });
            } else {
                document.exitFullscreen();
            }
        }
        
        // Adjust iframe height based on content (if same-origin)
        function adjustIframeHeight() {
            const iframe = document.getElementById('app-frame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const height = iframeDoc.body.scrollHeight;
                if (height > 0) {
                    iframe.style.height = height + 'px';
                }
            } catch (e) {
                // Cross-origin, can't access content
                console.log('Cannot adjust height for cross-origin iframe');
            }
        }
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
            setTimeout(adjustIframeHeight, 500);
        });
        
        // Prevent zoom on input focus (iOS)
        document.addEventListener('touchstart', function(event) {
            if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                event.target.style.fontSize = '16px';
            }
        });
        
        // Message handling from iframe (if needed)
        window.addEventListener('message', function(event) {
            // Handle messages from the embedded app
            if (event.data && event.data.type === 'resize') {
                const iframe = document.getElementById('app-frame');
                iframe.style.height = event.data.height + 'px';
            }
        });
    </script>
</body>
</html>